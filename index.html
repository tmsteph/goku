<!DOCTYPE html>
<html lang="es">
<head>
 <meta charset="UTF-8">
 
 <title>goku vs kefla</title>
</head>
<body>
 <div class="caja">
  <p class="tiempo"></p>
   <div class="vida">
    <div class="sangre"></div>
   </div>
   <div class="kefla"></div>
   <div class="goku">
    <div class="cuerpo"></div>
   </div>
   <script src="codigo.js"></script>
 </div>
</body>
</html>
<style>

*{
 margin: 0;
 padding: 0;
 background-size:130% 130%;
 background-position: center;
 background-repeat:no-repeat;
}

body {
 width: 100vw;
 height: 100vh;
}

.caja{
 position: absolute;
 width: 100%;
 height: 100%;
 background-image:url(fondo.png);
}

.kefla{
 position: absolute;
 width: 140px;
 height: 140px;
 background-image:url(kefla.gif);
 top:80px;
}


.goku,.cuerpo{
 position: absolute;
 width: 130px;
 height: 130px;
 background-image:url(goku.gif); 
 background-size:100% 100%;
 transform:rotatey(180deg);
 right: 0;
 
}

.goku2{
 background-image:url(goku2.png);
 background-size:40% 70%;
 background-position: bottom;
}


.poder{
 position: absolute;
 width: 10px;
 height: 10px;
 background: red;
 border-radius: 50%;
 border:solid 1px #fffc95;
}

.poder2{
 position: absolute;
 width: 10px;
 height: 10px;
 background: red;
 border-radius: 50%;
 border:solid 1px #fffc95;
}

.cuerpo{
 background-Image:none ;
 width: 50px;
 height: 60px;
 margin: auto;
 left:0;
 right:0;
 bottom:0;

}

.vida{
 position: absolute;
 width: 150px;
 height: 30px;
 border:solid 1px #ffbd6a; 
 top:30px;
 left:10px;
}

.sangre{
 position: absolute;
 width: 100%;
 height: 100%;
 background: red;
}

p{
 position: absolute;
 width: 50px;
 height: 30px;
 margin: auto ;
 top: 10px;
 right: 0;
 left: 0;
 background: #2bd5ff;
 color: black;
 font-size:30px;
 text-align:center;
 padding: 2%;
}
</style>

<script>
let k = document.querySelector('.kefla');
let g = document.querySelector('.goku');
let caja = document.querySelector('.caja');
let cuerpo = document.querySelector('.cuerpo');
let vida = document.querySelector('.sangre');
let tempo = document.querySelector('.tiempo');

let tiempo = 0;
let tiempo2 = 0;
let valor1 = 0;
let valor2 = 5;
let menos = 100;
let contar = 0
setInterval(()=>{ 

 let gx = g.getBoundingClientRect().x;
 let gy = g.getBoundingClientRect().y;
 let c = caja.getBoundingClientRect().width;
 let c2 = caja.getBoundingClientRect().height;
 let a  = Math.floor(gx);
  if(gx + 50 > c ||
     gy + 50 > c2) {
     g.style.left = '300px';   
     g.style.top = '0px'
  };
 
 tiempo++;
 
 if(tiempo % 60 == 0) {
    contar += 1
    tempo.innerHTML = ${contar}
 };
 
 if(tiempo % 40 == 0) {
 let poder = document.createElement('div');
 k.appendChild(poder);
 poder.classList.add('poder');
  
 let poder2 = document.createElement('div');
 k.appendChild(poder2);
 poder2.classList.add('poder2');
 
 cuerpo.style.border = "none"
 }
 
 let elemnts = document.querySelectorAll('.poder');
 let elemnts2 = document.querySelectorAll('.poder2');
 
 elemnts.forEach((e,i)=>{
 elemnts[i].style.transform += `translatex(10px)`+
                               translatey(${valor2}px);
 let x = e.getBoundingClientRect().x;
 let y = e.getBoundingClientRect().y;
 if(x + 10 > innerWidth || 
    y + 10 > innerHeight) {
    e.remove();
    valor2 = Math.floor(Math.random()*10);
 } 
 let gx2 = cuerpo.getBoundingClientRect().x;
 let gy2 = cuerpo.getBoundingClientRect().y;
 if(x + 10 > gx2 && x < gx2 + 50 && 
    y + 10 > gy2 && y < gy2 + 60) {
    e.remove();
    menos -= 1;
    vida.style.width = ${menos}%;
    cuerpo.style.border = "solid red"
 }
 });
 
 //------------/poder dos
 
 elemnts2.forEach((e,i)=>{
elemnts2[i].style.transform += `translatex(${valor2}px)`+
                               translatey(10px);
 let x = e.getBoundingClientRect().x;
 let y = e.getBoundingClientRect().y;
 if(x + 10 > innerWidth || 
    y + 10 > innerHeight) {
    e.remove();
    valor2 = Math.floor(Math.random()*10);
 } 
 let gx2 = cuerpo.getBoundingClientRect().x;
 let gy2 = cuerpo.getBoundingClientRect().y;
 if(x + 10 > gx2 && x < gx2 + 50 && 
    y + 10 > gy2 && y < gy2 + 60) {
    e.remove();
    menos -= 1;
    vida.style.width = ${menos}%;
    cuerpo.style.border = "solid red"
 }
 });
  
},1000/60);

caja.addEventListener('touchstart',()=>{  
 let v1 = Math.random()*innerWidth;
 let v2 = Math.random()*innerHeight;
 g.style.left = ${v1}px;
 g.style.top = ${v2}px;
 g.classList.remove('goku2')
});

caja.addEventListener('touchend',()=>{ 
  
 g.classList.add('goku2');
});
</script>